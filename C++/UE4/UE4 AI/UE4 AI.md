# AI

## 广义 AI 应用举例

* 自动化数字内容生成技术(CV)
* Raytracing(光追) 中 AI 降噪
* 基于增强学习的游戏AI(棋类)
* 狭义或传统的游戏 AI 技术

## UE4 实践:感知寻路系统

### A Star 算法

寻路算法: 在图中找到联通两点的一条最优路径，而传统的最短路径算法效率不高。在游戏中会使用启发式搜索寻找最短路径，如 A star 算法。

`A*` 找到的不一定是最优路径 而是 基于评估函数。具体算法细节见图。

其中 open_set 和 close_set 可以用优先队列维护。

### UE4

UE4 通过 Recast 组件将输入场景模型体素化, 并生成导航网络 Navmesh, 接着使用 Recast 组件中的Detour 实现寻路。

* Recast 一款开源的 Navmesh 生成以及导航组件。
* Detour 可以利用 Navmesh 进行寻路

#### Recast 执行顺序

* 体素化: 从 源几何体 构造实心的高度场, 用来表示不可行走的空间。Recast中体素为长方体。
* 生成区域: 将实行高度场的 上表面 中连续的区间合并为地区
* 生成轮廓: 检测地区的轮廓并构造成简单多边形
* 生成多边形网格: 将轮廓分割成 凸多边形
* 生成高度细节: 将多边形网格三角化, 得到高度细节

## UE4 实践:决策系统--行为树

### 有限状态机

* 现态: 当前所处状态
* 条件: 条件被满足，将会触发一个动作，或者执行一次状态的迁移。
* 动作: 条件满足后执行的动作。__(非必须)__
* 次态: 条件满足后要迁往的新状态。

### 行为树

* 行为节点组成的树状结构, 子节点由其父节点来控制。
* 每个节点都有一个结果(true of false)
* 子节点的执行结果会传递给父节点, 进而决定下一步的动作
* __节点不需要维护向其他节点的转换，其模块性大大增强。因此他不再是状态而是行为。__

举例见图.

#### 行为树节点

* 组合节点: 也叫控制节点, 有一个或多个子节点，可以顺序、选择、随机 执行子节点
* 修饰节点: 有且只有一个子节点, 将子节点的结果经修饰后传给父节点
* 叶子节点: 具体的业务节点, 由开发者定义实现
	- 条件节点
	- 执行节点
	
## 实战: 搭建敌人AI

现场跟做.
